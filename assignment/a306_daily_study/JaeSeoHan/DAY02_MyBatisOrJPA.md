# MyBatis vs JPA
## MyBatis
### What is MyBatis?
- 사용자 지정 SQL, 저장 프로시저 및 고급 매핑을 지원하는 프레임워크
- 거의 모든 JDBC 코드와 매개변수의 수동 설정 및 검색 결과 지원

## JPA
### What is JPA?
- ORM: Object-Relational Mapping
  - 객체는 객체대로 설계하고 RDB는 RDB대로 설계
  - 객체와 RDB를 중간에서 매핑해주는 프레임워크
- JPA
  - JAVA 진영의 표준 ORM 기술, Java Application에서 RDB를 사용하는 방식을 정의한 인터페이스 모음
  - 실제로 동작하는 것이 아닌 인터페이스 구현 필요(Hybernate, EclipseLink, DataNucleus)

### SQL을 직접 다룰 때의 문제점
1. 반복적인 코드 작성
  - 모든 DB 작업에 대한 쿼리문 작성 필요
  - 반복적인 CRUD 쿼리문 작성과 객체와 sql 매핑에 시간이 걸림
2. SQL 의존적 개발
  - 테이블 변경이 있을 경우 모든 연관된 쿼리문 변경 필요
  - 동작하지 않는 상황에서 JAVA 로직 및 DB 모두 확인 필요
3. 패러다임 불일치
  - JAVA는 객체지향 언어이지만 RDB는 객체지향이 아님

### JPA 장단점
- 장점
  1. 생산성
    - JPA 에 객체를 전달만 하면 되므로 SQL 을 작성하고 JDBC API 를 사용하는 반복적인 일을 JPA 가 대신 처리해주어 생산성이 향상된다.
    - DDL 도 JPA가 자동으로 생성해주기 때문에 DB 설계 중심을 객체 설계 중심으로 변경할 수 있다.
  2. 유지보수
    - SQL 을 직접 다룰 때는 필드를 하나를 추가/삭제하여도 관련된 SQL 과 JDBC 코드를 전부 수정해야 했지만, JPA 는 이를 대신 처리해주어 유지보수가 줄어든다.
  3. 성능
    - 어플리케이션과 데이터베이스 사이에서 성능 최적화 기능을 제공한다.
    - 같은 트랜잭션 안에서는 같은 엔티티를 반환하기 때문에 통신 횟수를 줄일 수 있다.
  4. 데이터 접근 추상화와 벤더 독립성
    - RDB는 같은 기능이라도 벤더마다 사용법이 다르기 때문에 처음 선택한 DB에 종속되고 변경이 어렵다.
    - JPA는 어플리케이션과 데이터베이스 사이에서 추상화된 데이터 접근을 제공하여 종속되지 않도록 도와준다.
- 단점
  1. 학습 곡선이 높다.
    - JPA 를 사용하려면 객체와 관계형 데이터베이스를 어떻게 매핑해야 하는지 학습한 후에 JPA 의 핵심 개념들을 이해해야 한다.
    - JPA 의 핵심 개념인 영속성 컨텍스트에 대한 이해가 부족하면 SQL 을 직접 사용해서 개발하는 것보다 못한 상황이 발생할 수 있다.
  2. 속도 저하 가능성이 있다.
    - 프로젝트의 규모가 크고 복잡하여 설계가 잘못된 경우, 속도 저하 및 일관성을 무너뜨릴 수 있다.
    - 복잡하고 무거운 Query 는 속도를 위해 별도의 튜닝이 필요하기 때문에 결국 SQL 문을 써야 할 수 있다.

### JPA Annotations
|어노테이션|설명|
|@Entity|데이터베이스의 테이블과 일대일로 매칭되는 객체 단위이며, 클래스를 테이블과 매핑한다고 JPA 에게 알린다.|
|@Table|@Entity 선언된 클래스에 매핑할 테이블정보(테이블이름)을 알려준다. 이 어노테이션이 생략되면 클래스이름을 테이블이름으로 매핑한다.|
|@Column|데이터베이스의 테이블에 있는 컬럼에 필드(변수)를 매핑한다. 별다른 옵션을 설정하지 않는다면 기본적으로는 생략 가능하다.|
|@Id|@Entity 선언된 클래스의 필드를 테이블의 기본키(Primary Key)에 매핑한다.|
|@GeneratedValue|새로운 레코드가 생성될 때마다 마지막 PK 값에서 자동으로 +1 을 해줘야 하는 auto increment 컬럼인 것을 알려준다.|
|@EmbeddedId|복합키로서 정의된 값을 정의하고자 할 때 사용한다.|
|@Enumerated|Java 의 Enum 형태로 되어 있는 미리 정의되어 있는 코드 값이나 구분값을 데이터 타입으로 사용할 때 사용한다.|
|@Transient|Entity 객체에 속성으로 지정되어 있지만, 데이터베이스 에서는 필요없는 속성일 때 사용한다.|
